# Data Model - Frontend UI and User Experience

## Overview

This feature consumes data models from the backend API (Feature 004). No new database schemas are created, only TypeScript interfaces for frontend data representation.

## Entities

### User Session (Frontend-only)

**Description**: Represents authenticated user state in the frontend application

**Fields**:

| Field | Type | Description |
|-------|------|-------------|
| `token` | `string` | JWT token from Better Auth |
| `userId` | `string` | User identity from token payload |
| `email` | `string` | Email for display |
| `expiresAt` | `Date` | Expiration timestamp |

**TypeScript Interface**:

```typescript
interface UserSession {
  /** JWT token from Better Auth */
  token: string;
  /** User identity from token payload */
  userId: string;
  /** Email for display */
  email: string;
  /** Expiration timestamp */
  expiresAt: Date;
}
```

### Task (Consumes Backend Model)

**Description**: Represents a todo item from the backend API (matches backend model from Feature 003/004)

**Fields**:

| Field | Type | Description |
|-------|------|-------------|
| `id` | `number` | Unique task identifier (auto-generated by backend) |
| `user_id` | `string` | ID of the user who owns this task |
| `title` | `string` | Task title |
| `description` | `string \| null` | Optional task description |
| `completed` | `boolean` | Completion status |
| `created_at` | `Date` | Timestamp when task was created (UTC) |
| `updated_at` | `Date` | Timestamp when task was last updated (UTC) |

**TypeScript Interface**:

```typescript
interface Task {
  /** Unique task identifier (auto-generated by backend) */
  id: number;
  /** ID of the user who owns this task */
  user_id: string;
  /** Task title */
  title: string;
  /** Optional task description */
  description: string | null;
  /** Completion status */
  completed: boolean;
  /** Timestamp when task was created (UTC) */
  created_at: Date;
  /** Timestamp when task was last updated (UTC) */
  updated_at: Date;
}
```

## Validation Rules (Frontend)

### Task Creation
- `title`: REQUIRED, non-empty, max 200 characters
- `description`: OPTIONAL, max 1000 characters
- Validation performed via API client before sending to backend

### Task Update
- `title`: OPTIONAL, if provided must be non-empty and max 200 characters
- `description`: OPTIONAL, if provided must be max 1000 characters
- `completed`: OPTIONAL, can be set to `true` or `false`
- Validation performed via API client before sending to backend

## State Management

### Authentication State
- Stored in secure browser storage (httpOnly cookie or secure localStorage)
- Retrieved from Better Auth integration
- Automatically attached to API requests

### Task State
- Managed via React state and custom hooks (`useTasks`)
- Cached in memory during session
- Refreshed from API when needed
- Optimistic updates for better UX

## API Integration

### Data Flow
```
[User Interaction] → [Component State] → [API Client] → [Backend API] → [Database]
                                        ↑
                                   [JWT Token]
```

### Error Handling
- Network errors caught by API client
- Validation errors from backend returned to components
- User-friendly error messages displayed in UI
- Graceful degradation when API unavailable

## Frontend vs Backend Models

| Aspect | Frontend Model | Backend Model |
|--------|----------------|---------------|
| Technology | TypeScript interfaces | SQLModel classes |
| Storage | In-memory / browser | PostgreSQL database |
| Validation | Client-side + API response | Server-side with Pydantic |
| Persistence | Session only | Permanent in database |
| Access | React components | FastAPI endpoints |

**Synchronization**: Frontend models reflect backend models through API responses, maintaining consistency across layers.

## No Schema Changes Required

This feature only consumes existing backend models. No database schema changes are required.

**Verification**:
- ✅ Backend Task model already exists (Feature 003/004)
- ✅ TypeScript interfaces match backend response format
- ✅ Validation rules align with backend constraints
- ✅ API integration handles data mapping